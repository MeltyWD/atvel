<template>
  <div class="news-header">
    <div class="container">
      <div class="news-header__main">
        <div class="news-header__content">
          <div class="news-header__title">
            {{ content.headerContent.title }}
          </div>
          <div class="news-header__text">
            {{ content.headerContent.text }}
          </div>
        </div>
        <div class="news-header__media">
          <div class="news-header__trailer news-header__trailer--01">
            <div class="swiper" data-trailer-01>
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__01.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__02.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__01.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__03.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__04.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__06.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image">
                    <img
                      src="@img/news-header/news_header_image__05.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="news-header__trailer news-header__trailer--02">
            <div class="swiper" data-trailer-02>
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__05.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__04.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__07.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__08.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__04.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__09.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--md">
                    <img
                      src="@img/news-header/news_header_image__01.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="news-header__trailer news-header__trailer--03">
            <div class="swiper" data-trailer-03>
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__03.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__06.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__02.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__01.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__04.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__05.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
                <div class="swiper-slide">
                  <div class="news-header__image news-header__image--xl">
                    <img
                      src="@img/news-header/news_header_image__08.jpg"
                      class="img-cover"
                      alt=""
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- .news-header -->

  <div class="section section--white section--top">
    <div class="container">
      <PrettyHeading
        :content="content.prettyHeadingContent"
        :full="content.prettyHeadingContent.full"
      />
      <!-- <div class="pretty-heading">
        <div class="pretty-heading__tag">Latest</div>
        <h2 class="pretty-heading__title">
          Experience the future of home appliances
        </h2>
        <div class="pretty-heading__text">
          Discover the latest advancements and insights in home appliance
          technology.
        </div>
      </div> -->
      <!-- .pretty-heading -->

      <div class="news-primary">
        <div class="news-primary__main">
          <div class="news-primary__header">
            {{ content.newsPrimaryContent.header }}
          </div>
          <div class="news-primary__content">
            <ul class="news-primary__text">
              <li v-for="item in content.newsPrimaryListItems">
                {{ item.text }}
              </li>
            </ul>
            <NuxtLink
              :to="`/news/post/${content.newsPrimaryContent.link}`"
              class="news-primary__link"
              >{{ content.newsPrimaryContent.linkText }}</NuxtLink
            >
          </div>
        </div>
        <div class="news-primary__media news-primary__media--sm">
          <img src="@img/news_primary_image__sm.jpg" class="img-cover" alt="" />
        </div>
        <div class="news-primary__media news-primary__media--md">
          <img src="@img/news_primary_image__md.jpg" class="img-cover" alt="" />
        </div>
      </div>
      <!-- .news-primary -->

      <div class="news-block">
        <div class="news-block__main">
          <div class="news-block__grid">
            <div v-for="{ attributes: post } in posts" class="news-item">
              <NuxtLink
                :to="`/news/post/${post.link}`"
                class="news-item__media"
              >
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink :to="`/news/post/${post.link}`">
                  {{ post.previewTitle }}
                </NuxtLink>
              </div>
              <div class="news-item__text">
                {{ post.previewText }}
              </div>
              <div class="news-item__footer">
                <NuxtLink
                  :to="`/news/post/${post.link}`"
                  class="news-item__link"
                >
                  {{ post.previewLink }}
                </NuxtLink>
              </div>
            </div>

            <!-- <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>

            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>

            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>


            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of High&nbsp;-&nbsp;Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>
        
            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>
            
            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>
            
            <div class="news-item">
              <NuxtLink to="/news/post" class="news-item__media">
                <img
                  src="@img/content/news_item_image.jpg"
                  class="img-cover"
                  alt=""
                />
              </NuxtLink>
              <div class="news-item__title">
                <NuxtLink to="/news/post"
                  >Discover a&nbsp;Wide Range of&nbsp;High-Quality
                  Products</NuxtLink
                >
              </div>
              <div class="news-item__text">
                Explore our extensive collection of home goods, including
                furniture, decor, bedding, kitchenware, and more. Each product
                is meticulously crafted with attention to detail and innovative
                design elements.
              </div>
              <div class="news-item__footer">
                <NuxtLink to="/news/post" class="news-item__link"
                  >Technology</NuxtLink
                >
              </div>
            </div>
             -->
          </div>
        </div>
        <div class="news-block__footer">
          <button type="button" class="btn btn-border">
            <span>{{ content.buttonText.text }}</span>
          </button>
        </div>
      </div>
      <!-- .news-block -->
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="subscribe">
        <h2 class="subscribe__title">
          {{ content.subscriptionContent.title }}
        </h2>
        <div class="subscribe__subtitle">
          {{ content.subscriptionContent.subtitle }}
        </div>
        <div class="subscribe__main">
          <form>
            <div class="subscribe__form">
              <div class="subscribe__field">
                <input
                  type="text"
                  name="email"
                  placeholder="Enter your email"
                />
              </div>
              <div class="subscribe__button">
                <button type="submit" class="btn btn-red">
                  <span>{{ content.subscriptionContent.button }}</span>
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="subscribe__text">
          {{ content.subscriptionContent.text }}
        </div>
      </div>
      <!-- .subscribe -->
    </div>
  </div>
</template>

<script setup lang="ts">
import { useApi } from "../../src/composables/useApi";
import { useLocale } from "../../src/composables/useLocale";

const locale = useLocale();
const route = useRoute();
const { find } = useStrapi();
const posts = ref<any[]>([]);
const query = `?populate=*`;

const content = ref({
  headerContent: {
    title: "",
    text: "",
  },
  prettyHeadingContent: {
    tag: "",
    title: "",
    full: true,
  },
  subscriptionContent: {
    title: "",
    subtitle: "",
    button: "",
    text: "",
  },
  newsPrimaryContent: {
    header: "",
    link: "",
    linkText: "",
  },
  newsPrimaryListItems: [
    {
      text: "",
    },
  ],
  buttonText: {
    text: "",
  },
});

const getNews = async () => {
  const data = await find("news2", {
    populate: "*",
    locale: locale.value,
  })
    // @ts-ignore
    .then((x) => x.data)
    .catch((error) => console.log(error));

  if (data) {
    console.log("1", data);

    posts.value = data;
  }
};

const getContent = async () => {
  const { data: data, error } = await useApi<any>(`/news-page${query}`);

  if (data.value) {
    content.value = data.value.data.attributes;

    console.log(data.value.data.attributes);
  }

  if (error.value) {
    console.log(error);
  }
};

await getContent();
getNews();

watch(locale, async () => {
  await getContent();
  getNews();
});
</script>

<style scoped></style>
